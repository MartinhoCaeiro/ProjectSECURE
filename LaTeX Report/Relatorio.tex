\documentclass[a4paper]{article}
% Pacotes necessários
\usepackage[portuguese]{babel}
\usepackage[backend=biber, style=apa, citestyle=apa, language=portuguese]{biblatex}
\usepackage{csquotes}
\addbibresource{Recursos/referencias.bib}
\usepackage{graphicx}
\usepackage{subcaption}
\usepackage{amsmath}
\usepackage{graphicx}
\usepackage{subcaption}
\usepackage{setspace}
\usepackage{siunitx} % Required for alignment
\sisetup{
  round-mode          = places, % Rounds numbers
  round-precision     = 2, % to 2 places
}
\usepackage{enumerate}
\usepackage{enumitem}
\usepackage{amsmath}
\usepackage{karnaugh-map}
\usepackage[section]{placeins}
\usepackage{geometry}
\usepackage{amssymb}
\usepackage{titling}
\usepackage[T1]{fontenc}
\usepackage{float}
\usepackage[hidelinks]{hyperref}
\usepackage{xcolor}
\usepackage{indentfirst}
\usepackage{array}
\usepackage{wrapfig} % Coloca isto no preâmbulo
\usepackage{soul}
\usepackage{afterpage}
\usepackage[toc,page]{appendix}
\newcolumntype{P}[1]{>{\centering\arraybackslash}p{#1}}
\onehalfspacing


% Comando para criar uma página vazia
\newcommand\myemptypage{
    \null
    \thispagestyle{empty}
    \addtocounter{page}{-1}
    \newpage
}

% Página de título principal
\newcommand{\firsttitlepage}{
    \begin{titlepage}
        \centering
        \vspace*{1cm}
        
        % Logos superior
        \begin{figure}[h!]
            \centering
            \includegraphics[width=6cm]{Recursos/Logos/LOGO_IPB} % Substitua pelo caminho da imagem
            \vspace{0.5cm}
        \end{figure}

        % Informações da instituição
        \large\textbf{INSTITUTO POLITÉCNICO DE BEJA} \\
        \large\textbf{Escola Superior de Tecnologia e Gestão} \\
        \large\textbf{Licenciatura em Engenharia Informática} \\
        \large\textbf{Projeto Final de Curso} \\
        
        \vspace{1cm}
        
        % Título do projeto
        {\Huge \textbf{Desenvolvimento de um sistema de comunicações seguras }} \\
        
        \vspace{1cm}
        
        % Autores
    
        \large Martinho José Novo Caeiro - 23917 \\
        \large Paulo António Tavares Abade - 23919 \\
        \large Rafael Conceição Narciso - 24473 \\
        
        \vfill
        
        % Logo inferior
        \begin{figure}[h!]
            \centering
            \includegraphics[width=6cm]{Recursos/Logos/IPBejaESTIG.jpg} % Substitua pelo caminho da imagem
        \end{figure}
        
        % Local e data
        {\large Beja, julho de 2025}
    \end{titlepage}
}

\newcommand{\secondtitlepage}{
    \begin{titlepage}
        \centering
        \vspace*{1cm}
        
        % Informações da instituição
        \large\textbf{INSTITUTO POLITÉCNICO DE BEJA} \\
        \large\textbf{Escola Superior de Tecnologia e Gestão} \\
        \large\textbf{Licenciatura em Engenharia Informática} \\
        \large\textbf{Projeto Final de Curso} \\
        
        \vspace{2cm}
        
        % Título do projeto
        {\Huge \textbf{Desenvolvimento de um sistema de comunicações seguras }} \\
        
        \vspace{1.5cm}
        
        % Autores
        \large Martinho José Novo Caeiro - 23917 \\
        \large Paulo António Tavares Abade - 23919 \\
        \large Rafael Conceição Narciso - 24473 \\

        \vspace{2cm}

        % Orientador
        \large Orientador: Professor Rui Silva \\
        
        \vfill
        
        % Local e data
        {\large Beja, julho de 2025}
    \end{titlepage}
}

\begin{document}


\pagenumbering{gobble} % Oculta numeração da página

% Primeira página de título
\firsttitlepage

\secondtitlepage


% Abstract
\section*{\LARGE\textbf{\textit{Resumo}}}

Neste relatório será abordado o processo de criação de uma solução de comunicações seguras,
que permita a troca de mensagens de texto entre os seus utilizadores.
Este relatório foi realizado no âmbito da Unidade Curricular de
Estágio ou Projeto (\cite{pagep}).


\vspace{1cm}
% Keywords
\textbf{Keywords:} aplicações, cibersegurança, comunicações, criptografia, c\#, python, bash, almalinux, wireguard, sqlite, kotlin
\newpage
%--------------------------------------------------------------------------------------------------------------------------------------

\section*{\LARGE\textbf{\textit{Abstract}}}

In this report, we will address the creation process of a secure communication
solution that allows text message exchange between its users.
This report was carried out within the scope of the
Curricular Unit of Internship or Project (\cite{pagep}).


\vspace{1cm}
% Keywords
\textbf{Keywords:} applications, cybersecurity, communications, cryptography, c\#, python, bash, almalinux, wireguard, sqlite, kotlin
\renewcommand{\contentsname}{Índice}       % Título do sumário
\renewcommand{\listfigurename}{Índice de Figuras} % Título da lista de figuras

% Início do conteúdo do relatório
\newpage
\doublespacing
\tableofcontents
\newpage
\listoffigures
\doublespacing

\newpage
\pagenumbering{arabic}

\section{Introdução}\label{intro}
Para a realização do projeto é necessário desenvolver um sistema de comunicações seguras, que permita a troca de mensagens de texto entre os seus utilizadores.
Para tal, é necessário implementar um sistema de autenticação de utilizadores, que permita a criação de contas de utilizador e a autenticação dos mesmos.
O sistema deve ser capaz de garantir a confidencialidade, integridade e autenticidade das mensagens trocadas entre os utilizadores. As tecnologias a utilizadas
no desenvolvimento deste projeto são: WireGuard (\cite{wireguard}), SQLite (\cite{sqlite}), C\# (\cite{csharp}), Kotlin (\cite{kotlin}), Python (\cite{python}),
Bash (\cite{bash}), AlmaOS (\cite{almaos}). Em relação a criptografia, serão utilizados os algoritmos Rijndael (vencedor do AES) e
Serpent (segundo lugar do AES), que são algoritmos de criptografia simétrica.

Para este projeto, foi decidido utilizar uma variação da metodologia do \textit{SCRUM}, onde eram realizadas reuniões semanais ao ínicio, e depois
foi sendo feito para ocorrer mais tempo entre reuniões, de forma a que fosse possível ter mais tempo para o desenvolvimento das
tarefas. Os três membros da equipa foram divididos entre as três áreas do projeto, nomeadamente: desenvolvimento da aplicação Windows,
desenvolvimento da aplicação Android e por último, a configuração da infraestrutura da rede.

O cronograma do projeto foi dividido em duas fases principais: Análise de Requisitos, Desenvolvimento, como é possível
ver na figura \ref{fig:project_schedule}. O relatório foi modificado a cada semana, acrescentando novas informações e
atualizações sobre o progresso do projeto.
\begin{figure}[H]
	\centering
	\includegraphics[width=0.8\textwidth]{Recursos/Cronograma.png}
	\caption{Cronograma do Projeto}
	\label{fig:project_schedule}
\end{figure}

Este projeto ficou guardado no repositório do GitHub da equipa, onde pode ser consultado por outros alunos e professores, a partir do seguinte
link:\\ \url{https://github.com/MartinhoCaeiro/Projeto-Cripto}.
%---------------------------------------------------------------------------------------------------------------------------
\newpage
\section{Analise de Requisitos}\label{analise}
Para a realização deste projeto, foram necessários os seguintes requisitos:
\begin{itemize}
	\item \textbf{Requisitos Funcionais:}
	      \begin{itemize}
		      \item O sistema deve permitir a criação de contas de utilizador.
		      \item O sistema deve permitir a autenticação de utilizadores.
		      \item O sistema deve permitir o envio e receção de mensagens entre utilizadores.
		      \item O sistema deve garantir a confidencialidade, integridade e autenticidade das mensagens trocadas.
	      \end{itemize}
	\item \textbf{Requisitos Não Funcionais:}
	      \begin{itemize}
		      \item O sistema deve ser seguro e resistente a ataques.
		      \item O sistema deve ser fácil de usar e intuitivo.
		      \item O sistema deve ser escalável e capaz de suportar um grande número de utilizadores.
	      \end{itemize}
\end{itemize}

%---------------------------------------------------------------------------------------------------------------------------
\newpage
\section{Tecnologias Utilizadas}\label{tecnologias}
Para o desenvolvimento deste projeto, foram utilizadas as seguintes tecnologias:
\begin{itemize}
	\item \textbf{Linguagens de Programação:} C\#, Kotlin
	\item \textbf{Frameworks:} .NET, WireGuard
	\item \textbf{Base de Dados:} SQLite
	\item \textbf{Criptografia:} Rijndael (Vencedor AES), Serpent (Segundo lugar AES)
	\item \textbf{Ferramentas de Desenvolvimento:} Git, Visual Studio Code, Android Studio
	\item  \textbf{Serviços de Hospedagem:} GitHub
\end{itemize}

%---------------------------------------------------------------------------------------------------------------------------
\newpage
\section{Arquitetura do Sistema}\label{arquitetura}
O sistema é composto por uma aplicação que funcionará como um chat, onde os utilizadores que estiverem registado na VPN poderão comunicar entre si.
Dentro da aplicação, os utilizadores podem saber quem está associado a um endereço IP da VPN, e assim enviar mensagens para esse utilizador.
Ao enviar uma mensagem, a aplicação irá contatar o servidor da VPN, para obter o caminho até ao destinatário, e assim enviar a mensagem.
Essa mensagem será encriptada antes de ser enviada, para garantir a confidencialidade e integridade da mensagem. Existe a variação
da encriptação utilizada na mensagem, de acordo com uma lógica pré-definida na aplicação, sendo que os métodos de encriptação utilizados são o AES
e o Serpent.

Sendo assim, a parte de encriptação das mensagens será feita como está demonstrado na figura \ref{fig:encryption_process}. A mensagem
será encriptada consoante um número pseudo-aleatório gerado pela aplicação, sendo assim escolhido o algoritmo de encriptação a utilizar naquele momento, o AES256 ou Serpent.
Para encriptar, é necessário fornecer também uma chave de encriptação. Nesta fase, a chave de encriptação é "\textit{\textbf{Spartacus}}". É importante destacar que o seletor 
está ofuscado, de forma a dificultar a sua identificação, a partir de uma máscara criada através da chave (\textit{salt}) e do número pseudo-aleatório.
\begin{figure}[h]
	\centering
	\includegraphics[width=0.8\textwidth]{Recursos/Encripta.png}
	\caption{Processo de Encriptação das Mensagens}
	\label{fig:encryption_process}
\end{figure}

\newpage

Para desencriptar, é necessário fazer o processo inverso. Desta forma, o número pseudo-aleatório está anexado à mensagem encriptada,
permitindo assim descobrir qual o algoritmo de encriptação utilizado. É possível ver este processo na figura \ref{fig:decryption_process}.
\begin{figure}[h]
	\centering
	\includegraphics[width=0.8\textwidth]{Recursos/Decripta.png}
	\caption{Processo de Decriptação das Mensagens}
	\label{fig:decryption_process}
\end{figure}
%---------------------------------------------------------------------------------------------------------------------------

\section{Modulos do Sistema}\label{modulos}

\subsection{Interface para Computador}
A interface para computador será desenvolvida em C\#, cuja qual é uma linguagem rápida e fácil de aprender, e que permite o desenvolvimento de aplicações desktop de forma rápida e eficiente.
A aplicação será desenvolvida utilizando o framework .NET.
Esta interface é composta por 4 ecrãs principais:
\begin{itemize}
	\item \textbf{Ecrã de Login:} onde o utilizador pode autenticar-se na aplicação utilizando as suas credenciais, tambem é possivel ver o status da ligação WireGuard.
	\item \textbf{Ecrã de Lista de Chats:} onde o utilizador pode ver a lista de chats existentes, bem como criar novos chats.
	\item \textbf{Ecrã de Chat:} onde o utilizador pode enviar e receber mensagens de outros utilizadores.
	\item \textbf{Ecrã de Configuração WireGuard:} onde o utilizador pode criar um ficheiro para configuração do WireGuard.
\end{itemize}

\subsection{Interface para Android}
A interface para Android será desenvolvida em Kotlin, que é uma linguagem de programação moderna e concisa, que permite o desenvolvimento de aplicações Android de forma rápida e eficiente.

\subsection{Módulo da VPN}
A VPN estará alojada num servidor com o sistema operativo AlmaOS 8.10 (\cite{almaos}), e será responsável por gerir as ligações dos utilizadores à VPN,
bem como a autenticação dos mesmos. O serviço escolhido foi o WireGuard, que é um serviço de VPN de código aberto,
leve e de alto desempenho, que utiliza criptografia moderna para garantir a segurança das comunicações. É necessário configurar previamente o WireGuard no dispositivo
do utilizador, para que este possa estabelecer uma ligação à VPN. \\TODO Tentar fazer com que seja feito da maneira mais automatizada possível.
\newpage 
\subsection{Base de Dados}
A base de dados será utilizada para armazenar as informações dos utilizadores, como as suas credenciais, bem como as mensagens trocadas entre os utilizadores, esta será implementada utilizando o SQLite.
A base de dados irá ter a seguinte estrutura:

\begin{figure}[H]
	\centering
	\includegraphics[width=0.8\textwidth]{Recursos/ProjectSecure_DB.png}
	\caption{Estrutura da Base de Dados}
	\label{fig:db_structure}
\end{figure}

\newpage 

Sendo que a base de dados é composta por 4 tabelas, cada uma com as suas respetivas colunas,
sendo que as tabelas são:\\\\

\begin{minipage}{\textwidth}


	\begin{itemize}

		\item \textbf{User:}
		      \begin{itemize}
			      \item UserID (chave primária)
			      \item Username (string)
			      \item Password (string)
		      \end{itemize}

		\item \textbf{Chat:}
		      \begin{itemize}
			      \item ChatID (chave primária)
			      \item Name (string)
			      \item AdminID (chave estrangeira, referência à tabela User)
		      \end{itemize}

		\item \textbf{Participant:}
		      \begin{itemize}
			      \item ParticipantID (chave primária)
			      \item ChatID (chave estrangeira, referência à tabela Chat)
			      \item UserID (chave estrangeira, referência à tabela User)
		      \end{itemize}
		      \newpage
		\item \textbf{Message:}
		      \begin{itemize}
			      \item MessageID (chave primária)
			      \item ParticipantID (chave estrangeira, referência à tabela Participant)
			      \item Content (string)
			      \item Date (data e hora da mensagem)
			      \item SenderUserID (chave estrangeira, referência à tabela Participant)
		      \end{itemize}
	\end{itemize}
\end{minipage}

%---------------------------------------------------------------------------------------------------------------------------
\newpage
\section{Desenvolvimento}\label{desenvolvimento}
\subsection{Interface para Computador}
Para o desenvolvimento da interface para computador, foi utilizado o Visual Studio Code, que é um ambiente de desenvolvimento integrado (IDE) da Microsoft.

\subsubsection{Ecrã de Login}
O ecrã de login é composto por um formulário onde o utilizador pode inserir as suas credenciais, e um botão para autenticar-se na aplicação.
Caso não tenha uma conta criada apenas tem que preencher o formulario e clicar no botão de criar conta, esta ação só é possivel com o Wireguard ativado.
Também é possivel ver o estado da ligação WireGuard, caso esteja ligado ou desligado.
\begin{figure}[htb]
    \centering
    \begin{subfigure}[b]{0.45\textwidth}
        \includegraphics[width=\textwidth]{Recursos/LoginPC1.png}
        \caption{WireGuard Ativado}
        \label{fig:img1}
    \end{subfigure}
    \hfill
    \begin{subfigure}[b]{0.45\textwidth}
        \includegraphics[width=\textwidth]{Recursos/LoginPC2.png}
        \caption{Wireguard Desativado}
        \label{fig:img2}
    \end{subfigure}
    \caption{Ecrã de Login - Computador}
    \label{fig:duas_imagens}
\end{figure}

\newpage
\subsubsection{Ecrã de Lista de Chats}
O ecrã de lista de chats é composto por uma lista de chats existentes e um botão para criar novos chats, este só pode ser criado com o WireGuard ativado.
No seu canto superior direito, existe um botão para aceder às definições da aplicação, onde o utilizador pode configurar se quer a aplicação em modo escuro ou claro,
e no seu canto inferior esquerdo existe um botão para terminar sessão caso deseja mudar de utilizador.
\begin{figure}[htb]
    \centering
    \begin{subfigure}[b]{0.45\textwidth}
        \includegraphics[width=\textwidth]{Recursos/ListaPC1.png}
        \caption{WireGuard Ativado}
        \label{fig:img1}
    \end{subfigure}
    \hfill
    \begin{subfigure}[b]{0.45\textwidth}
        \includegraphics[width=\textwidth]{Recursos/ListaPC2.png}
        \caption{Wireguard Desativado}
        \label{fig:img2}
    \end{subfigure}
    \caption{Ecrã de Lista de Chats - Computador}
    \label{fig:duas_imagens}
\end{figure}

\newpage
\subsubsection{Ecrã de Chat}
O ecrã de chat é composto por uma lista de mensagens trocadas entre os utilizadores, mensagens recebidas ficam do lado esquerdo e mensagens enviadas no lado direito.
Apenas é possivel enviar mensagens com o WireGuard ativado, para enviar uma mensagem basta escrever no campo de texto e clicar no botão de enviar.
\begin{figure}[htb]
    \centering
    \begin{subfigure}[b]{0.45\textwidth}
        \includegraphics[width=\textwidth]{Recursos/ChatPC1.png}
        \caption{WireGuard Ativado}
        \label{fig:img1}
    \end{subfigure}
    \hfill
    \begin{subfigure}[b]{0.45\textwidth}
        \includegraphics[width=\textwidth]{Recursos/ChatPC2.png}
        \caption{Wireguard Desativado}
        \label{fig:img2}
    \end{subfigure}
    \caption{Ecrã de Chat - Computador}
    \label{fig:duas_imagens}
\end{figure}

\newpage
\subsubsection{Ecrã de Configuração WireGuard}
O ecrã de configuração WireGuard é composto por um formulário onde o utilizador insere o seu nome, e um botão para descarregar o ficheiro de configuração do WireGuard.
\begin{figure}[h!]
	\centering
	\includegraphics[width=6cm]{Recursos/WireguardPC.png} % Substitua pelo caminho da imagem
	\label{fig:wireguard_pc}
	\caption{Ecrã de Configuração WireGuard - Computador}
\end{figure}

\subsection{Interface para Android}
Para o desenvolvimento da interface para Android, foi utilizado o Android Studio, que é um ambiente de desenvolvimento integrado (IDE) oficial para o sistema operativo Android.

\subsection{AlmaOS - Serviço de VPN}
Para configurar corretamente o serviço de VPN, é necessário instalar o WireGuard no servidor AlmaOS 8.10,
para isso ser feito, foi necessário seguir os seguintes passos:
\begin{enumerate}
	\item Adicionar o repositório EPEL - sudo dnf install epel-release
	\item Adicionar o repositório ELREPO - sudo dnf install https://www.elrepo.org/elrepo-release-8.el8.elrepo.noarch.rpm
	\item Ativar o CodeReady Builder - sudo /usr/bin/crb enable
	\item Atualizar os metadados - sudo dnf makecache
	\item sudo dnf --enablerepo=elrepo install kmod-wireguard -y
	\item Instalar o WireGuardTools - sudo dnf install wireguard-tools -y
\end{enumerate}
Para verificar se o WireGuard está instalado corretamente, pode-se utilizar o comando \textbf{"sudo modprobe wireguard"},
se este não devolver nenhum output, significa que o WireGuard está instalado corretamente.

Agora, para configurar o WireGuard, é necessário criar as chaves de criptografia, para isso é necessário
ir para a pasta \textbf{/etc/wireguard} e executar o seguintes comando:
\begin{verbatim}
    wg genkey | tee server_private.key | wg pubkey > server_public.key
    chmod 600 server_private.key
\end{verbatim}
Isto irá gerar duas chaves, uma privada e uma pública, que serão utilizadas para autenticar os utilizadores na VPN.
\newpage
Após isso, é necessário criar o ficheiro de configuração do WireGuard, onde estará definida a configuração da VPN em si,
como o endereço IP da VPN, a porta de escuta, as chaves de criptografia, entre outros.
Para isso, é necessário criar o ficheiro \textbf{wg0.conf} na pasta \textbf{/etc/wireguard}, e adicionar o seguinte conteúdo:
\begin{verbatim}
    [Interface]
    PrivateKey = <Chave Privada do Servidor>
    Address = 10.0.0.1/24
    ListenPort = 51820
    SaveConfig = true
    [Peer]
    PublicKey = <Chave Pública do Cliente>
    AllowedIPs = 10.0.0.2/32
\end{verbatim}

Para garantir o bom funcionamento da VPN, é necessário ativar o encaminhamento de endereços IP, para assim permitir o tráfego de rede.
Para isso, é necessário fazer o seguinte comando:
\begin{verbatim}
    # Para permitir o tráfego de rede 
    echo "net.ipv4.ip_forward = 1" | sudo tee -a /etc/sysctl.conf
    sudo sysctl -p

    # Para permitir o tráfego pela porta 51820
    sudo firewall-cmd --add-masquerade --permanent
    sudo firewall-cmd --add-port=51820/udp --permanent
    sudo iptables -t nat -A POSTROUTING -s 10.0.0.0/24 -o enp0s3 -j MASQUERADE
    sudo firewall-cmd --reload

\end{verbatim}
\newpage
Para ser possível encaminhar o tráfego de rede, é necessário adicionar uma regra ao Router para que, todos os pacotes que cheguem à porta 51820
sejam encaminhados para o servidor WireGuard.
Por fim, basta iniciar o serviço do WireGuard, para isso é necessário executar o seguinte comando:
\begin{verbatim}
    sudo systemctl enable --now wg-quick@wg0
\end{verbatim}


Do lado do cada cliente, vai ser necessário configurar o WireGuard, de maneira a que apenas a informação
proveniente da aplicação desenvolvida seja enviada através da VPN, onde assim serão poupados recursos
do dispositivo que está a fazer o papel de servidor. Para isso, foi criado um \textit{script} que cria o ficheiro
de configuração do WireGuard para o cliente, sendo que este só deve adicionar o ficheiro de configuração na aplicação
do WireGuard. O \textit{script} ainda automatiza a adição do cliente nas configurações do servidor.

Para conseguir estabelecer a troca de ficheiros entre o servidor e o cliente, foi necessário implementar
um \textit{script} que gerencia as trocas de ficheiros da base de dados entre os clientes e o servidor.
Esse script foi feito em Python, utiliza a biblioteca Flask para criar uma API REST que permite a comunicação entre o cliente e o servidor.
Foi necessário permitir a porta 8000 no servidor, para que o cliente possa comunicar com o servidor.
\begin{verbatim}
    sudo firewall-cmd --add-port=8000/tcp --permanent
    sudo firewall-cmd --reload
\end{verbatim}

%---------------------------------------------------------------------------------------------------------------------------
\newpage
\section{Problemas Encontrados}\label{problemas}
Durante o desenvolvimento do projeto, foram encontrados alguns problemas, que foram resolvidos da seguinte forma:
\subsection{Problemas de Conexão}
Logo no inicio da implementação da VPN foi necessário achar uma solução para a configuração de encaminhamento de pacotes, pois o servidor Linux
não possui um endereço IP público próprio. Para contornar este problema, foi necessário configurar o encaminhamento de pacotes no router, de forma
a que todos os pacotes que chegassem à porta 51820 fossem encaminhados para o servidor Linux, e este resolveria a situação encaminhando o resto dos pacotes pela VPN.\\
Outro problema encontrado foi a dificuldade em encontrar uma maneira para estabelecer a conexão pela primeira vez, ou seja, enviar o ficheiro de configuração
da VPN para o dispositivo do utilizador, de forma a que este pudesse estabelecer a conexão com o servidor. Para resolver este problema,
foi necessário criar um \textit{script} que gerasse o ficheiro de configuração do WireGuard, e que fosse possível enviar esse ficheiro para o dispositivo do utilizador (\#TODO).

\subsection{Problemas na aplicação Windows/Android}
Durante o desenvolvimento da aplicação, foram encontrados diversos problemas, como por exemplo:
\begin{itemize}
	\item Problemas de compatibilidade entre tipos de base de dados (SQLite e Schemas)
	      \begin{itemize}
		      \item Incompatibilidade de nomes entre tabelas
		      \item Configurações por defeito diferentes entre as plataformas.
	      \end{itemize}
	\item Sincronização de dados entre dispositivos.
	\item Visualização incorreta das informações
	\item Permissões do Android
	\item Impossibilidade de modificar a base de dados enquanto a aplicação está a correr
\end{itemize}

%-------------------------------------------------------------------------------------------------
\newpage
\section{Testes}\label{testes}
Os testes realizados tem como base 2 metodos:
\begin{itemize}
	\item Verificação da base de dados através do servidor
	\item Sniffing das comunicações com o uso do Wireshark
\end{itemize}

\subsection{Servidor}
Os testes realizados no servidor foram focados na verificação da base de dados e na monitorização das comunicações.
Para a verificação da base de dados, é feita a tentativa de ler o ficheiro enviado, e como é possivel verificar nas figuras abaixo,
ao ler o ficheiro sem criptografia, é possível visualizar o seu conteúdo perfeitamente, ao ler o ficheiro com criptografia,
não é possível visualizar o seu conteúdo pois o servidor guarda a base de dados sem desencriptar, isto leva a que o ficheiro nem seja reconhecido como uma base de dados.
\begin{figure}[htb]
    \centering
    \begin{subfigure}[b]{0.45\textwidth}
        \includegraphics[width=\textwidth]{Recursos/LoginPC1.png}
        \caption{Sem Criptografia}
        \label{fig:img1}
    \end{subfigure}
    \hfill
    \begin{subfigure}[b]{0.45\textwidth}
        \includegraphics[width=\textwidth]{Recursos/LoginPC2.png}
        \caption{Com Criptografia}
        \label{fig:img2}
    \end{subfigure}
    \caption{Teste com Servidor}
    \label{fig:duas_imagens}
\end{figure}

\subsection{Comunicações}
Para a monitorização das comunicações, foi utilizado o Wireshark para fazer sniffing dos pacotes que estavam a ser enviados e recebidos pelo servidor.
Como é possivel ver nas figuras abaixo, estes são os resultados:
\begin{figure}[htb]
    \centering
    \begin{subfigure}[b]{0.45\textwidth}
        \includegraphics[width=\textwidth]{Recursos/LoginPC1.png}
        \caption{Sem Criptografia}
        \label{fig:img1}
    \end{subfigure}
    \hfill
    \begin{subfigure}[b]{0.45\textwidth}
        \includegraphics[width=\textwidth]{Recursos/LoginPC2.png}
        \caption{Com Criptografia}
        \label{fig:img2}
    \end{subfigure}
    \caption{Teste com Wireshark}
    \label{fig:duas_imagens}
\end{figure}

%---------------------------------------------------------------------------------------------------------------------------
\newpage
\section{Conclusão}\label{con}
Concluimos assim que o projeto foi um sucesso, pois conseguimos desenvolver um sistema de comunicações seguras
que permite a troca de mensagens de texto entre os seus utilizadores, sem que haja a possibilidade de terceiros acederem às mensagens trocadas.
Em geral, foi um projeto que nos permitiu aprender bastante sobre a área de cibersegurança e comunicações seguras,
e que nos possibilitou aplicar os conhecimentos adquiridos ao longo do curso de Engenharia Informática.
%---------------------------------------------------------------------------------------------------------------------------

\newpage
\renewcommand{\refname}{Bibliografia} % Para artigos
\renewcommand{\bibname}{Bibliografia} % Para livros e relatórios
\addcontentsline{toc}{section}{Bibliografia} % Adiciona a Bibliografia ao índice
\printbibliography
\newpage
\end{document}
